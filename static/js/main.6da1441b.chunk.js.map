{"version":3,"sources":["StateProvider.js","components/Search.js","components/TrendingItems.js","firebase.js","components/Header.js","components/Product.js","components/Home.js","reducer.js","components/Subtotal.js","components/CheckoutItem.js","components/Checkout.js","components/Login.js","axios.js","components/Payment.js","components/Order.js","components/Orders.js","components/App.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Search","dispatch","displayItems","useState","search","setSearch","className","type","placeholder","onChange","e","target","onClick","searchword","TrendingItems","trendingItemlist","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","Header","cart","user","usernameFromEmail","email","split","to","src","signOut","length","Product","id","title","condition","price","image","rating","allItems","Array","fill","map","fontSize","alt","item","Home","getCartTotal","reduce","amount","state","action","console","log","filterItem","filter","toLowerCase","includes","index","findIndex","cartItem","newCart","splice","Subtotal","history","useHistory","renderText","decimalScale","displayType","thousandSeparator","prefix","push","CheckoutItem","hideButton","Checkout","Login","setEmail","password","setPassword","preventDefault","signInWithEmailAndPassword","then","catch","error","alert","message","typpe","createUserWithEmailAndPassword","instance","axios","create","baseURL","Payment","stripe","useStripe","elements","useElements","processing","setProcessing","succeeded","setSucceeded","setError","disabled","setDisabled","clientSecret","setClientSecret","useEffect","a","method","url","response","data","getClientSecret","handleSubmit","event","confirmCardPayment","payment_method","card","getElement","CardElement","paymentIntent","collection","doc","uid","set","created","replace","onSubmit","empty","Order","order","moment","unix","format","tile","Orders","orders","setOrders","orderBy","onSnapshot","snapshot","docs","stripePromise","loadStripe","App","onAuthStateChanged","authUser","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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ACA,cAAC,EAAD,eCpEdC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,CAAepK,aVTS,CAC1BqC,KAAM,GACNC,KAAM,KACNe,SAAU,CACR,CACEN,GAAG,IACHC,MAAM,yBACNE,MAAM,GACND,UAAU,aACVE,MAAM,gHACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,wHACNE,MAAM,KACND,UAAU,OACVE,MAAM,qFACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,2DACNE,MAAM,KACND,UAAU,OACVE,MAAM,iIACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,0EACNE,MAAM,IACND,UAAU,OACVE,MAAM,wJACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,mCACNE,MAAM,IACND,UAAU,MACVE,MAAM,0HACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,+EACNE,MAAM,MACND,UAAU,MACVE,MAAM,oJACNC,OAAO,IAGX3C,aAAc,CACZ,CACEsC,GAAG,IACHC,MAAM,yBACNE,MAAM,GACND,UAAU,aACVE,MAAM,gHACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,wHACNE,MAAM,KACND,UAAU,OACVE,MAAM,qFACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,2DACNE,MAAM,KACND,UAAU,OACVE,MAAM,iIACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,0EACNE,MAAM,IACND,UAAU,OACVE,MAAM,wJACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,mCACNE,MAAM,IACND,UAAU,MACVE,MAAM,0HACNC,OAAO,GAET,CACEL,GAAG,IACHC,MAAM,+EACNE,MAAM,MACND,UAAU,MACVE,MAAM,oJACNC,OAAO,KU3FkCrD,QAASA,EAApD,SACA,cAAC,EAAD,QAGFsK,SAASC,eAAe,U","file":"static/js/main.6da1441b.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\n\n// Create datalayer\nexport const StateContext = createContext();\n\nexport const StateProvider = ({ reducer, initialState, children }) => (\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\n    {children}\n  </StateContext.Provider>\n);\n\n// Pull information from the data layer\nexport const useStateValue = () => useContext(StateContext);","import React, { useState, useEffect } from 'react';\nimport { useStateValue } from '../StateProvider.js';\nimport '../styles/Search.css';\nimport SearchIcon from '@material-ui/icons/Search';\n\nfunction Search() {\n  // get the displayItem from reducer\n  const [{ displayItems }, dispatch] = useStateValue();\n  const [search, setSearch] = useState('');\n\n\n  const updateDisplayProducts = () => {\n    dispatch({\n      type: 'UPDATE_DISPLAY_PRODUCTS',\n      searchword: search,\n    })\n  }\n\n  const showAllItem = () => {\n    dispatch({\n      type: 'REFRESH_DISPLAY_PRODUCTS',\n    })\n  }\n\n\n\n  return (\n    <div className='search'>\n      <input className='search__searchInput' type='text' placeholder='Search' onChange={(e) => setSearch(e.target.value)}/>\n      <SearchIcon className='search__searchIcon' onClick={ search === '' ? showAllItem : updateDisplayProducts}/>\n    </div>\n  )\n}\n\nexport default Search\n","import React, { useState } from 'react';\nimport '../styles/TrendingItems.css';\nimport { useStateValue } from '../StateProvider';\n\n\n\nfunction TrendingItems() {\n  const trendingItemlist = ['Diptyque perfume', 'MacBook Laptop', 'Apple Watch', 'Patio Set', 'Chanel reissue']\n\n  const [index, setIndex] = useState(1);\n  const [item, setItem] = useState(trendingItemlist[0]);\n\n  return (\n    <div className='trendingitem__container'>\n      <div className='trendingitem__eachItem'>\n        <h4 className='trendingitem_number'><i>1</i></h4>\n        <h4 className='trendingitem_name'>{trendingItemlist[0]}\n        </h4>\n      </div>\n\n      <div className='trendingitem__eachItem'>\n        <h4 className='trendingitem_number'><i>2</i></h4>\n        <h4 className='trendingitem_name'>{trendingItemlist[1]}\n        </h4>\n      </div>\n\n      <div className='trendingitem__eachItem'>\n        <h4 className='trendingitem_number'><i>3</i></h4>\n        <h4 className='trendingitem_name'>{trendingItemlist[2]}\n        </h4>\n      </div>\n\n      <div className='trendingitem__eachItem'>\n        <h4 className='trendingitem_number'><i>4</i></h4>\n        <h4 className='trendingitem_name'>{trendingItemlist[3]}\n        </h4>\n      </div>\n\n      <div className='trendingitem__eachItem'>\n        <h4 className='trendingitem_number'><i>5</i></h4>\n        <h4 className='trendingitem_name'>{trendingItemlist[4]}\n        </h4>\n      </div>\n    </div>\n  )\n}\n\nexport default TrendingItems\n","import firebase from 'firebase';\n\n// firebase config\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBu-vPgPApae-hKqOh4EoJVN1gWlrZk4KU\",\n  authDomain: \"e-commerce-scart.firebaseapp.com\",\n  databaseURL: \"https://e-commerce-scart.firebaseio.com\",\n  projectId: \"e-commerce-scart\",\n  storageBucket: \"e-commerce-scart.appspot.com\",\n  messagingSenderId: \"1051946373823\",\n  appId: \"1:1051946373823:web:29df1839fd57400e492c0a\",\n  measurementId: \"G-70PYB2NJBB\"\n};\n\n // Setup two things\n// 1. Initialize firebase app\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\n\n// 2. initialize firestore(DB) and auhentification\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\n\nexport { db, auth };","import React from 'react';\nimport '../styles/Header.css';\n// import SearchIcon from '@material-ui/icons/Search';\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\nimport Search from './Search';\nimport TrendingItems from './TrendingItems';\nimport { Link } from 'react-router-dom';\nimport { useStateValue } from '../StateProvider';\nimport { auth } from '../firebase.js';\n\n\n\nfunction Header() {\n\n  const [{ cart, user }, dispatch] = useStateValue();\n  const usernameFromEmail = user ? user.email.split('@').[0] : 'Guest'\n\n  const handleAuthentication = () => {\n    if (user) {\n      auth.signOut();\n    }\n  }\n\n  const showAllItem = () => {\n    dispatch({\n      type: 'REFRESH_DISPLAY_PRODUCTS',\n    })\n  }\n\n  return (\n    <div className='header'>\n\n     {/*  when clicking logo -> go to main homepage */}\n     <Link to='/'>\n      <img className='header__logo' src='https://i.imgur.com/B0eaVD2.png' onClick={showAllItem}/>\n     </Link>\n\n     <Search />\n\n    <TrendingItems />\n\n    <div className='header__nav'>\n      <Link to='/login'>\n        <div className='header__option'>\n          <span className='header__optionLineOne'>Hello {usernameFromEmail}</span>\n          <span className='header__optionLineTwo' onClick={handleAuthentication}>{user ? 'Sign Out' : 'Sign In'}</span>\n        </div>\n      </Link>\n\n      <Link to='/orders'>\n        <div className='header__option'>\n          <span className='header__optionLineOne'>Returns</span>\n          <span className='header__optionLineTwo'>& Orders</span>\n        </div>\n      </Link>\n\n      <Link to='/checkout'>\n        <div className='header__optionCart'>\n          <ShoppingCartIcon />\n          <span className='header__optionLineTwo header__basketCount'>{cart.length}</span>\n        </div>\n      </Link>\n    </div>\n\n    </div>\n  )\n}\n\nexport default Header\n","import React, { useEffect } from 'react';\nimport '../styles/Product.css';\nimport { useStateValue } from '../StateProvider';\nimport StarIcon from '@material-ui/icons/Star';\n\nfunction Product({id, title, condition, price, image, rating }) {\n\n// dispatch: how to manipulate data\n// const [state, dispatch] = useStateValue();\nconst [{ allItems }, dispatch] = useStateValue();\n// state: global state\n// console.log('cart in Product >>>>', cart)\n\n\n  const addToCart = () => {\n    // dispatch the item into the data layer (action & action item)\n    dispatch({\n      type: 'ADD_TO_CART',\n      item: {\n        id: id,\n        title: title,\n        condition: condition,\n        price: price,\n        image: image,\n        rating: rating\n      }\n    })\n  }\n  return (\n    <div className='product'>\n      <div className='product__info'>\n        <p>{title}</p>\n\n\n        <p className='product__price'>\n          <small>$</small>\n          <strong>{price}</strong>\n        </p>\n        <p className='product__condition'>Condition: {condition}</p>\n        <div className='product__rating'>\n        {Array(rating).fill().map(() =>  <p className='product__starIcon'><StarIcon fontSize=\"small\" /></p>)}\n        </div>\n      </div>\n\n      <img src={image} alt=\"\"/>\n      <button onClick={addToCart}>Add to Cart</button>\n    </div>\n  )\n}\n\nexport default Product\n","import React, { useState, useEffect } from 'react';\nimport { useStateValue } from '../StateProvider.js';\nimport '../styles/Home.css';\nimport Product from './Product';\n\nfunction Home() {\n\n  const [{ displayItems }, dispatch] = useStateValue();\n\n\n\n  return (\n    <div className='home'>\n      <div className='home_container'>\n        <img className='home_image' src='https://i.imgur.com/qydIey7.png' alt='' />\n\n        <div className='home_row'>\n\n          {\n            displayItems.map((item) => (\n\n            <Product\n              id={item.id}\n              title={item.title}\n              price={item.price}\n              condition={item.condition}\n              image={item.image}\n              rating={item.rating}\n          />\n\n            ))\n          }\n          </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Home\n\n","// state\nexport const initialState = {\n  cart: [],\n  user: null,\n  allItems: [\n    {\n      id:'1',\n      title:'Diptyque Perfume Doson',\n      price:90,\n      condition:'Almost new',\n      image:'https://mercari-images.global.ssl.fastly.net/photos/m76577444376_1.jpg?1602650326&w=200&h=200&fitcrop&sharpen',\n      rating:5\n    },\n    {\n      id:'2',\n      title:'[Refurbished] Apple - MacBook Pro - 16\" Display with Touch Bar - Intel Core i7 - 16GB Memory - 512GB SSD - Space Gray',\n      price:1100,\n      condition:'Good',\n      image:'https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6366/6366564_sd.jpg',\n      rating:4\n    },\n    {\n      id:'3',\n      title:'CHANEL Aged Calfskin Quilted 2.55 Reissue 226 Flap Black',\n      price:4050,\n      condition:'Good',\n      image:'https://www.fashionphile.com/images/product-images/thumb/3ab0b98ff0565c8e099a5e8e6c0b2bf9/1ba36119ee329bec22ae0714e9a287a0.jpg',\n      rating:4\n    },\n    {\n      id:'4',\n      title:'[Used] Apple Watch 38mm Series 2 Aluminum GPS with Sport Band MP0D2LL/A',\n      price:120,\n      condition:'Good',\n      image:'https://i5.walmartimages.com/asr/378bb73b-0705-4493-9941-35e24101047c_1.c5ed98ac6aca7a05e1a785ed146c3677.jpeg?odnWidth=612&odnHeight=612&odnBg=ffffff',\n      rating:3\n    },\n    {\n      id:'5',\n      title:'Tadwick Patio 3 Piece Bistro Set',\n      price:299,\n      condition:'New',\n      image:'https://secure.img1-fg.wfcdn.com/im/53410039/resize-h250%5Ecompr-r85/6757/67571957/Tadwick+Patio+3+Piece+Bistro+Set.jpg',\n      rating:4\n    },\n    {\n      id:'6',\n      title:'39 in. x 16 in. \"Classic Orchid\" by Graham and Brown Printed Canvas Wall Art',\n      price:39.55,\n      condition:'New',\n      image:'https://images.homedepot-static.com/productImages/43486047-8534-4c33-9ef7-be6de132d5de/svn/blue-graham-brown-posters-art-prints-41-542-e1_600.jpg',\n      rating:3\n    }\n  ],\n  displayItems: [\n    {\n      id:'1',\n      title:'Diptyque Perfume Doson',\n      price:90,\n      condition:'Almost new',\n      image:'https://mercari-images.global.ssl.fastly.net/photos/m76577444376_1.jpg?1602650326&w=200&h=200&fitcrop&sharpen',\n      rating:5\n    },\n    {\n      id:'2',\n      title:'[Refurbished] Apple - MacBook Pro - 16\" Display with Touch Bar - Intel Core i7 - 16GB Memory - 512GB SSD - Space Gray',\n      price:1100,\n      condition:'Good',\n      image:'https://pisces.bbystatic.com/image2/BestBuy_US/images/products/6366/6366564_sd.jpg',\n      rating:4\n    },\n    {\n      id:'3',\n      title:'CHANEL Aged Calfskin Quilted 2.55 Reissue 226 Flap Black',\n      price:4050,\n      condition:'Good',\n      image:'https://www.fashionphile.com/images/product-images/thumb/3ab0b98ff0565c8e099a5e8e6c0b2bf9/1ba36119ee329bec22ae0714e9a287a0.jpg',\n      rating:4\n    },\n    {\n      id:'4',\n      title:'[Used] Apple Watch 38mm Series 2 Aluminum GPS with Sport Band MP0D2LL/A',\n      price:120,\n      condition:'Good',\n      image:'https://i5.walmartimages.com/asr/378bb73b-0705-4493-9941-35e24101047c_1.c5ed98ac6aca7a05e1a785ed146c3677.jpeg?odnWidth=612&odnHeight=612&odnBg=ffffff',\n      rating:3\n    },\n    {\n      id:'5',\n      title:'Tadwick Patio 3 Piece Bistro Set',\n      price:299,\n      condition:'New',\n      image:'https://secure.img1-fg.wfcdn.com/im/53410039/resize-h250%5Ecompr-r85/6757/67571957/Tadwick+Patio+3+Piece+Bistro+Set.jpg',\n      rating:4\n    },\n    {\n      id:'6',\n      title:'39 in. x 16 in. \"Classic Orchid\" by Graham and Brown Printed Canvas Wall Art',\n      price:39.55,\n      condition:'New',\n      image:'https://images.homedepot-static.com/productImages/43486047-8534-4c33-9ef7-be6de132d5de/svn/blue-graham-brown-posters-art-prints-41-542-e1_600.jpg',\n      rating:3\n    }\n  ]\n}\n\n// selector\nexport const getCartTotal = (cart) =>\n  cart?.reduce((amount, item) => item.price + amount, 0);\n\n// REDUCER = always listening\nconst reducer = (state, action) => {\n  console.log('action in reducer', action)\n\n  switch(action.type) {\n    case 'REFRESH_DISPLAY_PRODUCTS':\n      return {\n        ...state,\n        displayItems: state.allItems\n      }\n\n    case 'UPDATE_DISPLAY_PRODUCTS':\n\n      const filterItem = state.displayItems.filter(item =>\n        item.title.toLowerCase().includes(action.searchword.toLowerCase())\n\n      )\n      console.log('filteredItem in reducer', filterItem)\n\n      return {\n        ...state,\n        displayItems: filterItem\n      }\n\n    case 'ADD_TO_CART':\n      return {\n        ...state,\n        cart: [...state.cart, action.item],\n      };\n\n    case 'EMPTY_CART':\n      return {\n        ...state,\n        cart: [],\n      };\n\n    case 'REMOVE_FROM_CART':\n      const index = state.cart.findIndex(\n        cartItem => cartItem.id === action.id\n      );\n      let newCart = [...state.cart];\n\n      if (index >= 0) {\n        newCart.splice(index, 1);\n\n      } else {\n        console.log(\n          `cannot remove product (id: ${action.id}) as it is not in the cart`\n        )\n      }\n\n      return {\n        ...state,\n        cart: newCart\n      }\n\n      case 'SET_USER':\n        return {\n          ...state,\n          user: action.user\n        }\n\n\n\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;","import React from 'react';\nimport '../styles/Subtotal.css';\nimport CurrencyFormat from 'react-currency-format';\nimport { useStateValue } from '../StateProvider'\nimport { getCartTotal } from '../reducer';\nimport { useHistory } from 'react-router-dom';\n\nfunction Subtotal() {\n  const history = useHistory();\n  const [{ cart }, dispatch] = useStateValue();\n  // let totalPrice = 0;\n  // console.log('cart', cart)\n  // const mapPrice = cart.map(item => totalPrice += Number(item.price))\n  // console.log(mapPrice)\n\n  return (\n    <div className='subtotal'>\n      <CurrencyFormat\n        renderText={(value) => (\n            <p>\n              Subtotal ({cart.length} items):\n              <strong> {value}</strong>\n            </p>\n         )}\n         decimalScale={2}\n         value={getCartTotal(cart)}\n         displayType={\"text\"}\n         thousandSeparator={true}\n         prefix={\"$\"}\n      />\n\n      {/* react-router-dom => history.push : push into the browser, redirect keep the design */}\n      <button onClick={ e => history.push('/payment')}>Proceed to Checkout</button>\n    </div>\n  );\n}\n\nexport default Subtotal\n","import React from 'react';\nimport '../styles/CheckoutItem.css';\nimport { useStateValue } from '../StateProvider';\nimport StarIcon from '@material-ui/icons/Star';\n\nfunction CheckoutItem({id, title, condition, price, image, rating, hideButton }) {\n\n  const [{ cart }, dispatch] = useStateValue();\n\n  const removeFromCart = () => {\n    // to do\n    dispatch({\n      type: 'REMOVE_FROM_CART',\n      id: id,\n    })\n  }\n\n\n  return (\n    <div className='checkoutItem'>\n      {console.log('hello checkout')}\n      <img className='checkoutItem__image' src={image} />\n\n      <div className='checkoutItem__info'>\n        <p className='checkoutItem__title'>{title}</p>\n        <p className='checkoutItem__price'>\n          <small>$</small>\n          <strong>{price}</strong>\n        </p>\n        <p className='checkoutItem__condition'>Condition: {condition}</p>\n        <div className='checkoutItem__rating'>\n         {Array(rating).fill().map(() =>  <p className='checkoutItem__starIcon'>\n           <StarIcon fontSize=\"small\" /></p>)}\n        </div>\n        {!hideButton && (\n          <button onClick={removeFromCart}>Remove from Cart</button>\n\n        )}\n      </div>\n    </div>\n  )\n}\n\n\n\nexport default CheckoutItem\n","import React from 'react';\nimport '../styles/Checkout.css';\nimport Subtotal from './Subtotal.js';\nimport CheckoutItem from './CheckoutItem.js';\nimport { useStateValue } from '../StateProvider'\n\n\n\nfunction Checkout() {\n  const [{ cart, user }, dispatch] = useStateValue();\n  const usernameFromEmail = user ? user.email.split('@').[0] : 'Guest'\n  console.log('cartitem', cart)\n\n  return (\n    <div className='checkout'>\n      <div className='checkout__left'>\n        <img className='checkout__ad' src=\"\" alt=\"\"/>\n        <div>\n          <h3>Hello, {usernameFromEmail}</h3>\n          <h2 className='checkout__title'>Your Shopping Cart</h2>\n          {/* {cart.map(item => <CheckoutItem item={item}/>)} */}\n          {cart.map(item => <CheckoutItem\n            id={item.id}\n            title= {item.title}\n            condition= {item.condition}\n            price= {item.price}\n            image= {item.image}\n            rating= {item.rating}\n            />)}\n\n          {/* CheckoutItem */}\n          {/* CheckoutItem */}\n          {/* CheckoutItem */}\n          {/* CheckoutItem */}\n\n        </div>\n      </div>\n      <div className='checkout__right'>\n        <Subtotal></Subtotal>\n        {/* <div>Subtotal (2 items): $500</div> */}\n      </div>\n    </div>\n\n\n  )\n}\n\nexport default Checkout\n","import React, { useState } from 'react';\nimport '../styles/Login.css';\nimport { Link, useHistory } from 'react-router-dom';\nimport { auth } from '../firebase.js';\n\n\nfunction Login() {\n  const history = useHistory();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  // Sign-In\n  const signIn = e => {\n    e.preventDefault();\n\n    // firebase login logic\n    //https://firebase.google.com/docs/auth/web/start\n    auth\n        .signInWithEmailAndPassword(email, password)\n        .then(auth => {\n          // if auth is successful, redirect to home\n            history.push('/')\n        })\n        .catch(error => alert(error.message)\n        );\n  }\n\n  // Sign-Up\n  const signUp = e => {\n    e.preventDefault();\n    // firebase auth logic\n    auth\n        .createUserWithEmailAndPassword(email, password)\n        .then((auth) => {\n          // If signup is successful, return auth object\n          console.log('authentification success and auth object:', auth);\n          if (auth) {\n            history.push('/')\n          }\n        })\n        .catch(error => alert(error.message)\n    );\n\n  }\n\n  return (\n    <div className='login'>\n      <Link to='/'>\n        <img className='login__logo' src='https://i.imgur.com/Q3TUC8Z_d.webp?maxwidth=728&fidelity=grand' />\n      </Link>\n\n      <div className='login__container'>\n        <h2>Sign-in</h2>\n\n        {/* Form for login */}\n        <form>\n          <h5>E-mail</h5>\n          <input type='text' value={email} onChange={e=> setEmail(e.target.value)}/>\n\n          <h5>Password</h5>\n          <input type='password' value={password} onChange={e => setPassword(e.target.value)}/>\n\n          <button type='submit' onClick={signIn} className='login__signInButton'>Sign In</button>\n        </form>\n\n        <button typpe='submit' onClick={signUp} className='login__signUpButton'>Create your sCart Account</button>\n      </div>\n\n    </div>\n  )\n}\n\nexport default Login\n","import axios from 'axios';\n\nconst instance = axios.create({\n  // api url\n  baseURL: 'https://us-central1-e-commerce-scart.cloudfunctions.net/api'\n  // baseURL: 'http://localhost:5001/e-commerce-scart/us-central1/api'\n\n})\n\n\nexport default instance;","import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport '../styles/Payment.css';\nimport { useStateValue } from '../StateProvider.js';\nimport CheckoutItem from './CheckoutItem';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport CurrencyFormat from 'react-currency-format';\nimport { getCartTotal } from '../reducer';\nimport axios from '../axios';\nimport { db } from '../firebase.js'\n\n\nfunction Payment() {\n  const [{ cart, user }, dispatch] = useStateValue();\n  const history = useHistory();\n\n  const stripe = useStripe();\n  const elements = useElements()\n\n  const [processing, setProcessing] = useState(\"\");\n  const [succeeded, setSucceeded] = useState(false);\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true);\n  const [clientSecret, setClientSecret] = useState(true);\n\n  useEffect(() => {\n    // generate the special strripe secret which allows us to charge a customer\n    const getClientSecret = async () => {\n\n      const response = await axios({\n        method: 'post',\n        // stripe expects the ttotal in a currencies submits / *100 --change dollars to cent\n        url: `/payments/create?total=${getCartTotal(cart) * 100}`\n      });\n      setClientSecret(response.data.clientSecret)\n    }\n    getClientSecret();\n  }, [cart])\n\n  console.log('The clientSecret:', clientSecret)\n  console.log('user:', user)\n\n  const handleSubmit = async (event) => {\n    // stripe logic\n    event.preventDefault();\n    setProcessing(true);\n\n    // clientSecret: charge info etc\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement)\n      }\n    })\n    .then(({ paymentIntent }) => {\n      // paymentIntent : payment confirmation from stripe\n      // if payment is successful\n\n      // firestore db query\n      db.collection('user')\n        .doc(user?.uid)\n        .collection('orders')\n        .doc(paymentIntent.id)\n        .set({\n          cart: cart,\n          amount: paymentIntent.amount,\n          created: paymentIntent.created\n        })\n\n      setSucceeded(true);\n      setError(null);\n      setProcessing(false);\n\n      // After payment, empty cart and redirect to order page\n      dispatch({\n        type: 'EMPTY_CART'\n      })\n\n      history.replace('/orders')\n    })\n  }\n\n  const handleChange = e => {\n    // listen for changes in the cardelement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : \"\");\n  }\n\n  return (\n    <div className='payment'>\n      <div className='payment__container'>\n        <h3>\n          Checkout {\n            <Link to='/checkout'>({cart?.length} items)</Link>\n          }\n        </h3>\n\n        {/* payment info for address */}\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Delivery Address</h3>\n          </div>\n          <div className='payment__address'>\n            <p>Email: {user?.email}</p>\n            <p>770 Harrison St</p>\n            <p>Santa Clara, CA 95050</p>\n          </div>\n        </div>\n\n        {/* payment info for review items */}\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Review items and delivery</h3>\n          </div>\n          <div className='payment__item'>\n            {/* reuse the CheckoutItem component to show checkoout item */}\n            {cart.map(item =>\n              <CheckoutItem\n                id={item.id}\n                title= {item.title}\n                condition= {item.condition}\n                price= {item.price}\n                image= {item.image}\n                rating= {item.rating}\n              />)}\n          </div>\n        </div>\n\n        {/* payment infor for payment method */}\n        <div className='payment__section'>\n          <div className='payment__title'>\n            <h3>Payment Method</h3>\n          </div>\n          <div className='payment__details'>\n            {/* add stripe */}\n            <form onSubmit={handleSubmit}>\n              <CardElement onChange={handleChange}/>\n              <div className='payment__priceContainer'>\n                <CurrencyFormat\n                    renderText={(value) => (\n                        <h4>\n                          Order total: {value}\n                        </h4>\n                    )}\n                    decimalScale={2}\n                    value={getCartTotal(cart)}\n                    displayType={\"text\"}\n                    thousandSeparator={true}\n                    prefix={\"$\"}\n                  />\n\n                 <button className='payment__btn' disabled={processing || disabled ||\n                  succeeded}>\n                    <span>{processing ? <p>Processing</p> :\n                    \"Buy Now\"}</span>\n                  </button>\n              </div>\n\n                {/* error handling */}\n                {error && <div>{error}</div>}\n            </form>\n\n          </div>\n        </div>\n\n\n      </div>\n    </div>\n  )\n}\n\nexport default Payment\n","import React from 'react';\nimport '../styles/Order.css';\nimport moment from 'moment';\nimport CurrencyFormat from 'react-currency-format';\nimport CheckoutItem from './CheckoutItem'\n\n\nfunction Order({ order }) {\n\n  return (\n    <div className='order'>\n      <h2>Order</h2>\n      {console.log('order', order)}\n      <p>{moment.unix(order.data.created).format('MMMM Do YYYY, h:mm a')}</p>\n\n      <p className='order__id'>\n        <small>{order.id}</small>\n      </p>\n      {order.data.cart?.map(item => (\n        // reuse CheckoutItem component\n        <CheckoutItem\n          id={item.id}\n          tile={item.title}\n          condition= {item.condition}\n          image={item.image}\n          price={item.price}\n          rating={item.rating}\n          hideButton\n        />\n      ))}\n      <CurrencyFormat\n        renderText={(value) => (\n            <h3 className='order__total'>\n              Order Total: {value}\n            </h3>\n         )}\n         decimalScale={2}\n         value={order.data.amount / 100}\n         displayType={\"text\"}\n         thousandSeparator={true}\n         prefix={\"$\"}\n      />\n    </div>\n  )\n}\n\nexport default Order\n","import React, { useState, useEffect } from 'react';\nimport { db } from '../firebase';\nimport '../styles/Orders.css';\nimport { useStateValue } from '../StateProvider';\nimport Order from './Order'\n\nfunction Orders() {\n  console.log('orders')\n  const [{ cart, user }, dispatch] = useStateValue();\n  const [orders, setOrders] = useState([]);\n\n  useEffect(() => {\n    if (user) {\n      // show recent order first\n      db\n        .collection('user')\n        .doc(user?.uid)\n        .collection('orders')\n        .orderBy('created', 'desc')\n        .onSnapshot(snapshot => {\n          setOrders(snapshot.docs.map(doc => ({\n            id: doc.id,\n            data: doc.data()\n          })))\n        })\n    } else {\n      setOrders([])\n    }\n  }, [user])\n\n  return (\n    <div className='orders'>\n      <h1>Your Orders</h1>\n\n      <div className='orders__order'>\n        {/* debugging */}\n\n        {orders?.map(order => (\n          <Order order={order}/>\n        )\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Orders\n","import React, { useState, useEffect } from 'react';\nimport '../styles/App.css';\nimport Header from './Header';\nimport Home from './Home';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Checkout from './Checkout';\nimport Login from './Login';\nimport { auth } from '../firebase.js';\nimport { useStateValue } from '../StateProvider.js';\nimport Payment from './Payment';\nimport Orders from './Orders';\nimport {loadStripe} from '@stripe/stripe-js';\nimport { Elements } from '@stripe/react-stripe-js';\n\n// stipe publishable key\nconst stripePromise = loadStripe(\n  'pk_test_51HjZ6hCMZ8B0kysvPMgSDPsWtDmi5cNcufylauBZKh8wyTRaBoDv6WoeI2gfnqyzY8UTPOcv874qX15SNEokPLqS00bpVJCOrd')\n\n\nfunction App() {\n  const [{}, dispatch] = useStateValue();\n\n  // componentDidMount\n  useEffect(() => {\n    auth.onAuthStateChanged(authUser => {\n      console.log('THE USER IS >>>', authUser);\n\n      if (authUser) {\n\n        dispatch({\n          type: 'SET_USER',\n          user: authUser\n        })\n\n      } else {\n        dispatch({\n          type: 'SET_USER',\n          user: null\n        })\n      }\n    })\n  }, [])\n\n\n  return (\n\n    <Router>\n      <div className=\"App\">\n\n          {/* use react router */}\n          <Switch>\n\n            <Route path='/login'>\n              <Login />\n            </Route>\n\n            <Route path='/checkout'>\n              <Header />\n              <Checkout />\n            </Route>\n\n            <Route path='/orders'>\n              <Header />\n              <Orders />\n            </Route>\n\n            <Route path='/payment'>\n              <Header />\n              <Elements stripe={stripePromise}>\n               <Payment />\n              </Elements>\n            </Route>\n\n           {/* default */}\n            <Route path='/'>\n              <Header />\n              <Home />\n            </Route>\n\n          </Switch>\n      </div>\n    </Router>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport reducer, { initialState } from './reducer';\nimport { StateProvider } from './StateProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState={initialState} reducer={reducer}>\n    <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}